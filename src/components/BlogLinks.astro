---
// BlogLinks component - links to blog platforms
import blogLinksData from '../data/blogs.json';

interface BlogLink {
  name: string;
  url: string;
  description: string;
  publishedDate: string;
  sortIndex?: number;
}

// Sort blogs by sortIndex (if present) then by publishedDate descending (newest first)
const blogLinks = [...blogLinksData].sort((a, b) => {
  // If both have sortIndex, sort by that (lower numbers first)
  if (a.sortIndex !== undefined && b.sortIndex !== undefined) {
    return a.sortIndex - b.sortIndex;
  }
  // If only a has sortIndex, it comes first
  if (a.sortIndex !== undefined) return -1;
  // If only b has sortIndex, it comes first
  if (b.sortIndex !== undefined) return 1;
  // Otherwise sort by publishedDate descending
  return new Date(b.publishedDate).getTime() - new Date(a.publishedDate).getTime();
});
---

<section id="blogs" class="blog-links py-section-mobile md:py-section-desktop px-4">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-h2-mobile md:text-h2-desktop font-semibold mb-8 text-secondary text-center">
      Blogs
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {blogLinks.map((blog) => (
        <a
          href={blog.url}
          target="_blank"
          rel="noopener noreferrer"
          class="blog-card block p-6 rounded-lg bg-surface hover:bg-surface/80 transition-all duration-200 hover:scale-105 min-h-[44px]"
        >
          <h3 class="text-h3-mobile md:text-h3-desktop font-semibold mb-3 text-secondary">
            {blog.name}
          </h3>
          <p class="text-text-light text-sm">
            {blog.description}
          </p>
        </a>
      ))}
    </div>
  </div>
</section>
